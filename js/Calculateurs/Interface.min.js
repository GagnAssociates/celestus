$(function(){var i,n,t;Array.prototype.keySort=function(n){var t;n=n||{};var u=function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t},f=function(n,t){var i=0;for(var r in n)if(n.hasOwnProperty(r)){if(i==t)return r;i++}return!1},i=function(n,t,i){return(i=i!==null?i:1,n==t)?0:n>t?1*i:-1*i},r=u(n);if(!r)return this.sort(i);for(t in n)n[t]=n[t]=="desc"||n[t]==-1?-1:n[t]=="skip"||n[t]===0?0:1;return this.sort(function(t,u){for(var o=0,s=0,e,h;o===0&&s<r;)e=f(n,s),e&&(h=n[e],o=i(t[e],u[e],h),s++);return o}),this};$("#tauxMetal").NumBox({type:"integer",min:0,max:5e4});$("#tauxTritium").NumBox({type:"integer",min:0,max:15e4});$("#tauxPP").NumBox({type:"integer",min:0,max:2e7});$("#txtNbrMKII").NumBox({type:"integer",min:0,max:1e8});$("#txtNbrVaiss").NumBox({type:"integer",min:0,max:1e11});$("#prixGiZ").NumBox({type:"integer",min:0,max:15e7});$("#listeBatiments").bootstrapTable({onClickRow:function(n){ChargerBatiment(n)}});$("#listeTechnologies").bootstrapTable({onClickRow:function(n){ChargerTechnologie(n)}});LoadFromLocal();RemplirListePlansVaisseaux($(".selectVaisseau"));calculCoutModules();calculCoutTechnologie();calculCoutVaisseaux();calcRampe(null);calcTC(this);calcAIA();$("#nudObjReduc.spinner.form-control").on("keydown",function(n){$.inArray(n.keyCode,[46,8,9,27,13,110,190])!==-1||n.keyCode===65&&n.ctrlKey===!0||n.keyCode>=35&&n.keyCode<=39||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()}).TouchSpin({min:0,max:5});$("#nudPolitiqueTech.spinner.form-control, #nudPolitiqueBat.spinner.form-control, #nudPolitiqueBatMKII.spinner.form-control, #nudPolitiqueVaiss.spinner.form-control").on("keydown",function(n){$.inArray(n.keyCode,[46,8,9,27,13,110,190])!==-1||n.keyCode===65&&n.ctrlKey===!0||n.keyCode>=35&&n.keyCode<=39||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()}).TouchSpin({min:0,max:25});$("#nudNiveauBS.spinner.form-control, #nudBonusTCLabs.spinner.form-control").on("keydown",function(n){$.inArray(n.keyCode,[46,8,9,27,13,110,190])!==-1||n.keyCode===65&&n.ctrlKey===!0||n.keyCode>=35&&n.keyCode<=39||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()}).TouchSpin({min:0,max:5e3});$("#nudNiveauAIA.spinner.form-control, #nudNiveauRampe.spinner.form-control, #nudPorteeRampe.spinner.form-control, #nudPtsTech.spinner.form-control, #nudNiveauTC.spinner.form-control, #nudNiveauStructTc.spinner.form-control, #nudCumulLabs.spinner.form-control, #nudPorteeTCLabs.spinner.form-control").on("keydown",function(n){$.inArray(n.keyCode,[46,8,9,27,13,110,190])!==-1||n.keyCode===65&&n.ctrlKey===!0||n.keyCode>=35&&n.keyCode<=39||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()}).TouchSpin({min:0,max:5e4});$("#nudVitesseRampe.spinner.form-control").on("keydown",function(n){$.inArray(n.keyCode,[46,8,9,27,13,110,190])!==-1||n.keyCode===65&&n.ctrlKey===!0||n.keyCode>=35&&n.keyCode<=39||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()}).TouchSpin({min:1,max:200});$(".spinner.form-control").on("keydown",function(n){$.inArray(n.keyCode,[46,8,9,27,13,110,190])!==-1||n.keyCode===65&&n.ctrlKey===!0||n.keyCode>=35&&n.keyCode<=39||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()}).TouchSpin();$("#nudActuel").on("change",function(){parseInt($("#nudDesire").val())<100&&parseInt($("#nudActuel").val())>=parseInt($("#nudDesire").val())&&(parseInt($("#nudActuel").val())<100?$("#nudDesire").val(parseInt($("#nudActuel").val())+1):$("#nudDesire").val(100))});$("#nudDesire").on("change",function(){parseInt($("#nudActuel").val())>0&&parseInt($("#nudDesire").val())<=parseInt($("#nudActuel").val())&&(parseInt($("#nudDesire").val())>0?$("#nudActuel").val(parseInt($("#nudDesire").val())-1):$("#nudActuel").val(0))});$("#nudActuelTech").on("change",function(){parseInt($("#nudDesireTech").val())<100&&parseInt($("#nudActuelTech").val())>=parseInt($("#nudDesireTech").val())&&(parseInt($("#nudActuelTech").val())<100?$("#nudDesireTech").val(parseInt($("#nudActuelTech").val())+1):$("#nudDesireTech").val(100))});$("#nudDesireTech").on("change",function(){parseInt($("#nudActuelTech").val())>0&&parseInt($("#nudDesireTech").val())<=parseInt($("#nudActuelTech").val())&&(parseInt($("#nudDesireTech").val())>0?$("#nudActuelTech").val(parseInt($("#nudDesireTech").val())-1):$("#nudActuelTech").val(0))});$("#panSaisie,#panGlobal").find("input,select").on("change",function(){calculCoutModules()});$("#panSaisieTech,#panGlobal").find("input,select").on("change",function(){calculCoutTechnologie()});$("#panChoixVaisseau,#panGlobal").find("input,select").on("change",function(){calculCoutVaisseaux()});$("#panBatisseur input").on("change",function(){calcBatisseur()});$("#AIA input").on("change",function(){calcAIA()});$("#rampeLancement input").on("change",function(){calcRampe(this)});$("#technocites input").on("change",function(){calcTC(this)});$("#niveauxtechnologies input").on("change",function(){SaveToLocal()});$("#options input").on("change",function(){SaveToLocal()});$("#btnVider").on("click",function(){ViderBatimentListe()});$("#btnAjouter").on("click",function(){AjouterBatimentListe()});$("#listeBatiments").find(".btn").on("click",function(){EnleverBatimentListe(this)});$("#btnVoirDetailsListeBats").on("click",function(){VoirDetailsModules()});$("#btnExporterListeBats").on("click",function(){ExporterListeBatiments()});$("#btnImporterListeBats").on("click",function(){ImporterListeBatiments()});$("#btnSelectionnerDetailsModules").on("click",function(){SelectText("resumeCommande")});$("#btnViderTech").on("click",function(){ViderTechnologieListe()});$("#btnAjouterTech").on("click",function(){AjouterTechnologieListe()});$("#listeTechnologies").find(".btn").on("click",function(){EnleverTechnologieListe(this)});$("#btnExporterListeTechs").on("click",function(){ExporterListeTechnologies()});$("#btnImporterListeTechs").on("click",function(){ImporterListeTechnologies()});$("#btnViderVaiss").on("click",function(){ViderVaisseauListe()});$("#btnAjouterVaiss").on("click",function(){AjouterVaisseauListe()});$("#listeVaisseaux").find(".btn").on("click",function(){EnleverVaisseauListe(this)});$("#btnExporterListeVaisseaux").on("click",function(){ExporterListeVaisseaux()});$("#btnImporterListeVaisseaux").on("click",function(){ImporterListeVaisseaux()});i=new Date;$("#dateCopyRight").text(i.getFullYear());CalcTotalBatimentsListe();CalcTotalTechnologiesListe();$(window).resize(function(){if(listeBatiments=$("#listeBatiments").bootstrapTable("getData"),$("#listeBatiments").bootstrapTable("destroy"),$(this).width()<981)$("#listeBatiments").bootstrapTable({cardView:!0,data:listeBatiments,onClickRow:function(n){ChargerBatiment(n)}}).on("click-row.bs-table",function(n,t,i){ChargerBatiment(t,i)});else $("#listeBatiments").bootstrapTable({cardView:!1,data:listeBatiments,onClickRow:function(n){ChargerBatiment(n)}}).on("click-row.bs-table",function(n,t,i){ChargerBatiment(t,i)});if(CalcTotalBatimentsListe(),listeTechnologies=$("#listeTechnologies").bootstrapTable("getData"),$("#listeTechnologies").bootstrapTable("destroy"),$(this).width()<981)$("#listeTechnologies").bootstrapTable({cardView:!0,data:listeTechnologies,onClickRow:function(n){ChargerTechnologie(n)}}).on("click-row.bs-table",function(n,t,i){ChargerTechnologie(t,i)});else $("#listeTechnologies").bootstrapTable({cardView:!1,data:listeTechnologies,onClickRow:function(n){ChargerTechnologie(n)}}).on("click-row.bs-table",function(n,t,i){ChargerTechnologie(t,i)});if(CalcTotalTechnologiesListe(),listeVaisseaux=$("#listeVaisseaux").bootstrapTable("getData"),$("#listeVaisseaux").bootstrapTable("destroy"),$(this).width()<981)$("#listeVaisseaux").bootstrapTable({cardView:!0,data:listeVaisseaux,onClickRow:function(n){ChargerVaisseau(n)}}).on("click-row.bs-table",function(n,t,i){ChargerVaisseau(t,i)});else $("#listeVaisseaux").bootstrapTable({cardView:!1,data:listeVaisseaux,onClickRow:function(n){ChargerVaisseau(n)}}).on("click-row.bs-table",function(n,t,i){ChargerVaisseau(t,i)});CalcTotalVaisseauxListe()});n="batiments";t=window.location.href;n=t.match(/option=(.*)/)?t.match(/option=(.*)/)[1]:n;showDiv(n);window.onpopstate=function(){var n="batiments",t=window.location.href;n=t.match(/option=(.*)/)?t.match(/option=(.*)/)[1]:n;showDiv(n,!0)}});